<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Bloc 5 : Algorithmique</title>
		<!-- Gestion des scripts en fonction du mode de présentation -->
		<script src="../../commun/commun.js" type="text/javascript"></script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-menu-title='5.3.1 - Contexte'>
					<h1>Contexte</h1>
					<ul>
						<li>Sortir d'un labyrinthe,</li>
						<li>Rejoindre une destination au plus court,</li>
						<li>Planifier une tournée de livraison de colis,</li>
						<li>Router des paquets de données dans un réseau.</li>
					</ul>
					<p>Voici quelques problèmes modélisables par un graphe. Nous allons voir dans cette section les algorithmes de résolution à partir de graphe.</p>
				</section>
				<section>
					<section data-menu-title="5.3.2 - Les 7 Ponts de Königsberg">
						<h2>Les 7 points de Königsberg</h2>
						<p>La ville de Königsberg (aujourd’hui Kaliningrad en Russie) se situe sur la rivière Pregolia et comporte deux îles. Sept ponts relient les îles entre elles ou aux rives, comme sur la figure ci-dessous.</p>
						<p class="img-container">
							<img src='../7ponts.png' />
						</p>
					</section>
					<section>
						<p><p>Les habitants se posaient la question de savoir s’il existait une promenade permettant de passer une et une seule fois sur chaque pont pour revenir au point de départ.</p>
						<div class="boiteTravail">
							<p>Quelle réponse auriez-vous donner aux habitants de Königsberg ?</p>
						</div>
					</section>
					<section>
						<p>Pour traiter ce problème, nous devons définir les notions suivantes :</p>
						<ul>
							<li>Une <span class="highlight">chaîne</span>, dans un graphe non orienté, est une suite d’arêtes mises bout à bout reliant deux sommets du graphe (Cf. Fig 1).</li>
							<li>Un <span class="highlight">cycle</span> est une chaîne dont les extrémités coïncident, composée d’arêtes toutes distinctes (Cf. Fig 2).</li>
							<li>Une <span class="highlight">chaîne eulérienne</span> est une chaîne composée de toutes les arêtes du graphe, prises une seule fois (Cf. Fig 3).</li>
						</ul>
					</section>
					<section>
						<p class="img-container full">
							<img class='third-width' src='./chaine.png'/>
							<img class='third-width' src='./cycle.png'/>
							<img class='third-width' src='./euler.png'/>
						</p>
					</section>
					<section>
						<h3>Théorème d'Euler</h3>
						<blockquote>(i) Un graphe connexe admet une chaîne eulérienne entre les sommets $A$ et $B$ si et seulement si $A$ et $B$ sont les seuls sommets de degré impair.</blockquote>
						<blockquote>(ii) Un graphe connexe admet un cycle eulérien si et seulement si tous les sommets sont de degré pair.</blockquote>
					</section>
					<section>
						<p>Répondre au problème des habitants de Königsberg consiste à déterminer si le graphe contient un cycle eulérien ou non.</p>
						<p id="e1" class="img-container full"></p>
					</section>
					<section>
						<div class="boiteTravail">
							<p>&Eacute;crire l'algorithme qui prend en paramètre un graphe et indique s'il contient un cycle eulérien ou non.</p>
						</div>
					</section>
				</section>
					<section data-menu-title='5.3.3 - Parcours'>
						<h2>Parcours de graphe</h2>
						<p>Ils nous serviront souvent en tant que procédures
de base pour d'autres algorithmes.</p>
					</section>
					<section>
						<section data-menu-title="5.3.4 - Recherche du plus court chemin">
							<h2>Plus court chemin entre 2 sommets</h2>
						</section>
						<section>
							<p>Mettons-nous dans la place d'un livreur Super-eats qui se déplace en vélo. Il se situe actuellement aux abords d'un restaurant, situé au point $D$, et doit livrer une commande à un client situé au point $G$.</p>
							<p class='img-container'>
								<img src='../livraison-1.png' />
							</p>
						</section>
						<section>
							<p>En tant que cycliste, le livreur se déplace uniquement sur les pistes cyclables. La carte suivante indique les pistes permettant de relier le point d'arrivée, ainsi que les temps pour atteindre les points intermédiaires.</p>
							<p class='img-container'>
								<img src='../livraison-3.png' />
							</p>
						</section>
						<section>
							<div class="boiteQuestions">
								<p>Quel est le le plus court chemin entre $D$ et $G$ ?</p>
								<p class='img-container'>
									<img src='../livraison-3.png' />
								</p>
							</div>
						</section>
						<section>
							<p>Le graphe modélisant le problème est un graphe pondéré, où:</p>
							<ul>
								<li>Chaque sommet est un point d'intersection d'une piste cyclable,</li>
								<li>Chaque arête, une piste cyclable,</li>
								<li>Le poids de chaque arête, la durée en minutes pour parcourir la distance entre 2 sommets.</li>
							</ul>
						</section>
						<section>
							<p>Le problème du livreur Super-Eats est de déterminer la plus courte chaîne du graphe pondéré entre le sommet $D$ et un sommet $G$.</p>
							<p>Pour résoudre ce problème, une solution est d'appliquer l'algorithme de Dijkstra, découvert en 1959.</p>
						</section>
						<section>
							<h2>Algorithme de Dijkstra</h2>
							<p>Le principe consiste à construire la chaine en ajoutant un sommet à chaque étape.</p>
							<p>	On établit un tableau Coût de $n$ colonnes, où chacune va contenir au fut et à mesure :
									<br>- le coût pour atteindre le sommet $i$,
									<br>- le sommet prédécesseur $p$ de $i$ dans la plus courte chaine.
							</p>
						</section>
						<section>
								<div class="algorithm row">
									<div class="half-width">
									<table id="trace" class='responsive center'>
										<thead>
											<tr>
												<th>D</th>
												<th>A</th>
												<th>B</th>
												<th>C</th>
												<th>E</th>
												<th>F</th>
												<th>G</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
											</tr>
											<tr>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
											</tr>
											<tr>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
											</tr>
											<tr>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
											</tr>
											<tr>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
											</tr>
											<tr>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
											</tr>
											<tr>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
											</tr>
											<tr>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
												<td>&nbsp;</td>
											</tr>
										</tbody>
									</table>
								</div>
								<div class='img-container half-width'>
										<p id='dij' class=''></p>
								</div>
							</div>
							<div class="column">
								<div><p id='log'></p></div>
								<div class="sort-container sort-controller">
									<button id="fast-backward" title="Revenir au départ"><i class="fas fa-fast-backward" aria-hidden="true"></i></button>
									<button id="backward" title="Revenir à l'instruction précédente"><i class="fas fa-step-backward" aria-hidden="true"></i></button>
									<button id="forward" title="Aller à l'instruction suivante"><i class="fas fa-step-forward" aria-hidden="true"></i></button>
								</div>
							</div>
						</section>
						<section>
							<div class="boiteTravail">
								<p>&Eacute;crire l'algorithme qui détermine le plus court chemin entre 2 sommets.</p>
							</div>
						</section>
						<section>
							<div class="boiteTravail">
								<p>Déterminer la complexité de l'algorithme en fonction du nombre de comparaisons.</p>
							</div>
						</section>
					</section>
			</div>
		</div>
		<script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.15/lodash.min.js" integrity="sha256-VeNaFBVDhoX3H+gJ37DpT/nTuZTdjYro9yBruHjVmoQ=" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.0.3/build/highlight.min.js"></script>
		<script src="https://kit.fontawesome.com/5432c69a6f.js" crossorigin="anonymous"></script>
		<script src="../../lib/reveal/js/reveal.js"></script>
		<script type="text/javascript">
			initMode({
				header : 'Bloc 5 : Algorithmique'
			});
			document.querySelectorAll('.layer').forEach(function(item){
				item.addEventListener('click', function(){
					document.getElementById('livraison').src = item.dataset['src'];
				});
			});
		</script>
		<script src="../../lib/viz/viz.js" type="text/javascript"></script>
    <script src="../../lib/viz/full.render.js" type="text/javascript"></script>
		<script type='text/javascript'>
			var viz = new Viz();

				viz.renderSVGElement(`
					graph G {
						labelloc="b";
						label="Fig 4. Graphe non orienté modélisant les îles, rives et ponts de Königsberg.";
					 		{rank=min C}
							{rank=same D A}
							C -- A;
							A -- C;
							A -- B;
							B -- A;
							D -- C;
							D -- A [style=invis];
							D -- B;
							A -- D;
					}
					`, { engine : 'dot'})
				.then(function(element) {
					element.className = 'responsive';
					document.getElementById('e1').appendChild(element);
				});
				viz.renderSVGElement(`
					graph G {
    graph [pad="1", ranksep="0.5", nodesep="1"];
    node [width=0.5, shape=circle]
    {rank=min B E}
	{rank = same D C G}
	{rank = same A F}
	A [xlabel=<<font color="black">&nbsp;</font>>];
	B [xlabel=<<font color="black">&nbsp;</font>>];
	C [xlabel=<<font color="black">&nbsp;</font>>];
	D [xlabel=<<font color="black">&nbsp;</font>>];
	E [xlabel=<<font color="black">&nbsp;</font>>];
	F [xlabel=<<font color="black">&nbsp;</font>>];
	G [xlabel=<<font color="black">&nbsp;</font>>];

	D -- A [label="14"];
	D -- B [label="13"];
	A -- C [label="10"];
	A -- F [label="15"];
	B -- C [label="8"];
	B -- E [label="25"];
	C -- E [label="5"];
	C -- F [label="9"];
	E -- G [label="3"];
	F -- G [label="12"];
}
					`, { engine : 'dot'})
				.then(function(element) {
					element.className = 'responsive';
					document.getElementById('dij').appendChild(element);
				});
				let table = document.querySelectorAll('#trace tbody tr');
				let currentStep = 0;
				let trace = [
					{ 'A' : ['+∞'], 'B' : ['+∞'], 'C' : ['+∞'], 'D' : ['0'], 'E' : ['+∞'], 'F' : ['+∞'], 'G' : ['+∞'], 'log' : 'On initialise toutes les colonnes à &infin;, et la colonne du sommet de départ à 0.'},
					{ 'A' : ['14, D'], 'B' : ['13, D'], 'C' : ['+∞'], 'D' : ['|','0'], 'E' : ['+∞'], 'F' : ['+∞'], 'G' : ['+∞'], 'log': 'On choisit et marque le sommet de coût minimal : D<br>On met à jour les coûts des voisins en ajoutant le coût de D au poids des arêtes s\'il est inférieur au coût actuel<br>On marque D comme prédécesseur de chaque sommet.'},
					{ 'A' : ['14, D'], 'B' : ['|', '13, D'], 'C' : ['21, B'], 'D' : ['|','0'], 'E' : ['28, B'], 'F' : ['+∞'], 'G' : ['+∞'], 'log': 'On choisit et marque le sommet de coût minimal : B<br>On met à jour les coûts des voisins en ajoutant le coût de B au poids des arêtes s\'il est inférieur au coût actuel<br>On marque B comme prédécesseur de chaque sommet.'},
					{ 'A' : ['|', '14, D'], 'B' : ['|', '13, D'], 'C' : ['21, B'], 'D' : ['|','0'], 'E' : ['28, B'], 'F' : ['29, A'], 'G' : ['+∞'], 'log': 'On choisit et marque le sommet de coût minimal : A<br>On met à jour les coûts des voisins en ajoutant le coût de A au poids des arêtes s\'il est inférieur au coût actuel<br>On marque A comme prédécesseur de chaque sommet.'},
					{ 'A' : ['|', '14, D'], 'B' : ['|', '13, D'], 'C' : ['|', '21, B'], 'D' : ['|','0'], 'E' : ['26, C'], 'F' : ['29, A'], 'G' : ['+∞'], 'log': 'On choisit et marque le sommet de coût minimal : C<br>On met à jour les coûts des voisins en ajoutant le coût de C au poids des arêtes s\'il est inférieur au coût actuel<br>On marque C comme prédécesseur de chaque sommet.'},
					{ 'A' : ['|', '14, D'], 'B' : ['|', '13, D'], 'C' : ['|', '21, B'], 'D' : ['|','0'], 'E' : ['|', '26, C'], 'F' : ['29, A'], 'G' : ['29, E'], 'log': 'On choisit et marque le sommet de coût minimal : E<br>On met à jour les coûts des voisins en ajoutant le coût de E au poids des arêtes s\'il est inférieur au coût actuel<br>On marque E comme prédécesseur de chaque sommet.'},
					{ 'A' : ['|', '14, D'], 'B' : ['|', '13, D'], 'C' : ['|', '21, B'], 'D' : ['|','0'], 'E' : ['|', '26, C'], 'F' : ['|', '29, A'], 'G' : ['29, E'], 'log': 'On choisit et marque le sommet de coût minimal : F<br>On met à jour les coûts des voisins en ajoutant le coût de F au poids des arêtes s\'il est inférieur au coût actuel<br>On marque F comme prédécesseur de chaque sommet.'},
					{ 'A' : ['|', '14, D'], 'B' : ['|', '13, D'], 'C' : ['|', '21, B'], 'D' : ['|','0'], 'E' : ['|', '26, C'], 'F' : ['|', '29, A'], 'G' : ['|', '29, E'], 'log': 'On arrive au dernier sommet : G.<br>Pour obtenir le chemin, on remonte la liste de tous les prédécesseurs jusqu\'au sommet de départ D.<br>Soit, D-B-C-E-G, pour un coût de 29 min.'}
				];
				let nodes = document.querySelectorAll('#dij .node');

				document.getElementById('forward').addEventListener('click',function(){
					if (currentStep < trace.length){
						let td = table[currentStep].children;
						let log = trace[currentStep];
						td[0].innerHTML = log['D'][0];
						if (log['D'][0] == '|')
							td[0].style.backgroundColor='gray';
						td[1].innerHTML = log['A'][0];
						if (log['A'][0] == '|')
							td[1].style.backgroundColor='gray';
						td[2].innerHTML = log['B'][0];
						if (log['B'][0] == '|')
							td[2].style.backgroundColor='gray';
						td[3].innerHTML = log['C'][0];
						if (log['C'][0] == '|')
							td[3].style.backgroundColor='gray';
						td[4].innerHTML = log['E'][0];
						if (log['E'][0] == '|')
							td[4].style.backgroundColor='gray';
						td[5].innerHTML = log['F'][0];
						if (log['F'][0] == '|')
							td[5].style.backgroundColor='gray';
						if (log['G'][0] == '|')
							td[6].style.backgroundColor='gray';
						td[6].innerHTML = log['G'][0];
						currentStep++;

						document.querySelectorAll('#dij .node').forEach((item, i) => {
							let n = item.firstElementChild.textContent;
							if (item.lastElementChild.textContent != log[n][log[n].length - 1])
									item.lastElementChild.attributes.fill.value = "#ff0000";
							else {
								item.lastElementChild.attributes.fill.value = "#0000ff";
							}
							if (log[n][0] == '|')
								item.children[1].attributes.fill.value ="gray";
							item.lastElementChild.innerHTML = log[n][log[n].length - 1];
						});

						document.getElementById('log').innerHTML = log['log'];
					}
				});

				document.getElementById('fast-backward').addEventListener('click',function(){
					while (currentStep > 0){
						document.getElementById('backward').click();
					}
				});

				document.getElementById('backward').addEventListener('click',function(){
					if (currentStep > 0){
						currentStep--;
						let td = table[currentStep].children;
						let log = trace[currentStep - 1];
						for (let i = 0; i < td.length; i++){
							td[i].innerHTML = '&nbsp;';
							td[i].style.backgroundColor='white';
						}

						document.querySelectorAll('#dij .node').forEach((item, i) => {
							let n = item.firstElementChild.textContent;
							if (item.lastElementChild.textContent != log[n][log[n].length - 1])
								item.lastElementChild.attributes.fill.value = "#ff0000";
							else {
								item.lastElementChild.attributes.fill.value = "#0000ff";
							}
							if (log[n][0] == '|')
								item.children[1].attributes.fill.value ="gray";
							else
								item.children[1].attributes.fill.value ="none";
							item.lastElementChild.innerHTML = log[n][log[n].length - 1];
						});

						document.getElementById('log').innerHTML = log['log'];
					}
				});
    </script>
	</body>
</html>
